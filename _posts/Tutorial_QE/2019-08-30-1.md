---
title: "Tutorial Quantum ESPRESSO: Criando Scripts de Submissão"
date: 2019-08-30
tags: [QE, Tutorial]
classes: wide
header:
  teaser: images/posts/tutorial_qe/logo_header.jpg
excerpt: "Criando Scripts de Submissão"
mathjax: "true"
---

Em geral, a melhor forma de submeter cálculos tanto no próprio computador quanto para *clusters* é a utilização de *scripts* de submissão. Esses *scripts* podem ser escritos em diferentes linguagens de programação, entretanto a que utilizaremos será a linguagem **bash**. Devido à sua simplicidade e integração direta com o ambiente linux, gerar scripts em bash facilitará muito nosso trabalho e permitirá a automatização de diversas tarefas simples, porém repetitivas e chatas.

## Construindo o ambiente basico para o **slurm**

Todos os *scripts* de submissão que prepararemos serão feitos para submisão no **slurm**.

> O **Slurm Workload Manager**, ou **Slurm**, é um programador de tarefas gratuito e de código aberto para kernels Linux e do tipo Unix, usado por muitos dos supercomputadores e *clusters* de computadores do mundo. Ele fornece três funções principais: alocamento exclusivo e/ou não exclusivo à recursos computacionais (nós de processamento) para usuários com uma duração de tempo específica; provém um *framework* para iniciar, executar e monitorar trabalhos (tipicamente trabalhos paralelos usando MPI) em um conjunto de nós alocados; gerenciamento de diversos trabalhos em um sistema de fila automatizado.

Um exemplo de *script* básico de submissão é constrído segundo formato descrito abaixo:

```bash
#!/bin/bash

#SBATCH --nodes=1
#SBATCH --ntasks-per-node=4
#SBATCH --time=500:00:00
#SBATCH --job-name=basico

PREFIX="basico"
PSEUDO_DIR="/home/pseudo"
CALC="scf"
CMD_PW="mpirun -np 4 /home/interlab/qe-6.4.1/bin/pw.x -nk 1"

cat>$PREFIX.$CALC.in<<EOF
<<ARQUIVO DE INPUT DO CALCULO>>
EOF
$CMD_PW < $PREFIX.$CALC.in > $PREFIX.$CALC.out
```
