---
title: "Tutorial Quantum ESPRESSO: Criando arquivos de input"
date: 2019-08-30
tags: [QE, Tutorial]
classes: wide
header:
  teaser: images/posts/tutorial_qe/logo_header.jpg
excerpt: "Criando Scripts de Submissão"
mathjax: "true"
---

## Construindo o input básico para rodar um cálculo

Vamos agora montar um *input* para um cálculo SCF (**S**elf-**C**onsistent **F**ield) utilizando o programa **pw.x** da suíte do Quantum ESPRESSO. Existem diversos parâmetros que podem ser alterados no input do **pw.x**, e todos eles estão listados e explicados [aqui](https://www.quantum-espresso.org/Doc/INPUT_PW.html#idm45922794117376).

Abaixo você encontrará um exemplo básico do input para um cálculo SCF para o grafeno.

```bash
&control
   calculation = '$CALC' ,
   restart_mode = 'from_scratch' ,
   wf_collect = .false. ,
   outdir = '.' ,
   pseudo_dir = '$PSEUDO_DIR' ,
   prefix = '$PREFIX' ,
/
&system
   ibrav = 0 ,
   nat =  2 ,
   ntyp = 1 ,
   ecutwfc = 100.0 ,
   ecutrho = 1200.0 ,
/
&electrons
   conv_thr =  1.0D-10 ,
   electron_maxstep = 1000 ,
/
ATOMIC_SPECIES
   C   12.0107  C.pbe-van_ak.UPF
CELL_PARAMETERS (angstrom)
  2.466063858   0.000000000   0.000000000
  1.233031929   2.135673950   0.000000000
  0.000000000   0.000000000  20.000000000
ATOMIC_POSITIONS (angstrom)
C        3.082579823   1.779728292   3.220971257
C        0.616515965   0.355945658   3.220971257
K_POINTS automatic
  21 21 1   0 0 0
```

O *input* para o cálculo é relativamente simples. Ele é composto de cinco principais *seções*: **control**, **system** e **electrons**, **ions** e **cell** que controlam os parâmetros principais do cálculo. Todas as *seções* principais devem apresentar um **\&** na frente, caso contrário o programa irá apresentar um erro.

A *seção* **&control** apresenta os controles gerais do cálculo. Nela podemos controlar:
  * **calculation**: O tipo de cálculo a ser executado. Pode ser *'scf'*, *'nscf'*, *'bands'*, *relax*, *vc-relax*, *md* ou *vc-md*;
  * **restart_mode**: A forma como o cálculo inicia: do zero ('from_scratch') ou reiniciando um outro cálculo ('restart');
  * **wf_collect**: Se iremos salvar as funções de onda (.true.) ou não (.false.). Em geral as funções de onda são arquivos muito pesados (na casa dos GBytes), portanto só iremos salvar as funções de onda em casos muito específicos;
  * **outdir**:O diretório onde o programa ira salvar todos os arquivos temporários do cálculo. O '.' significa que o pw.x salvará qualquer arquivo temporário no mesmo diretório em que o cálculo está sendo submetido.
  * **pseudo_dir**: O diretório que contém os arquivos dos pseudopotenciais.
  * **prefix**: O prefixo do cálculo. Todos os cálculos sequenciais precisam apresentar o mesmo prefixo.

A *seção* **&system** apresenta os controles do sistema que executaremos o cálculo. Nela podemos controlar:
  * **ibrav**: O tipo de célula unitária. Se **ibrav=0** o programa lê os dados passados manualmente na caixa CELL_PARAMETERS, no fim do arquivo. Caso desejemos montar um sistema que se encaixe em uma das redes de Bravais, podemos informar qual rede é especificamente aqui. Nesse caso deve ser adicionado também a opção *celldm(1)=a*, onde *a* é o maior parâmetro da célula, em **unidades de atômicas** (1 Å = 1.88973 bohr).

    * **1** = Cúbico primitivo P: $$v_1$$ = a(1,0,0),  $$v_2$$ = a(0,1,0),  $$v_3$$ = a(0,0,1)
    * **2** = Cúbico de face centrada F (fcc): $$v_1$$ = (a/2)(-1,0,1),  $$v_2$$ = (a/2)(0,1,1), $$v_3$$ = (a/2)(-1,1,0)
    * **3** = Cúbico de corpo centrado I (bcc): $$v_1$$ = (a/2)(1,1,1),  $$v_2$$ = (a/2)(-1,1,1),  $$v_3$$ = (a/2)(-1,-1,1)
    * **4** = Hexagonal e Trigonal P: celldm(3)=c/a, $$v_1$$ = a(1,0,0),  $$v_2$$ = a(-1/2,sqrt(3)/2,0),  $$v_3$$ = a(0,0,c/a)
    * **5** = Trigonal R: celldm(4)=cos(gamma), $$v_1$$ = a(tx,-ty,tz), $$v_2$$ = a(0,2ty,tz), $$v_3$$ = a(-tx,-ty,tz)
    * **6** = Tetragonal Primitivo P: celldm(3)=c/a,  $$v_1$$ = a(1,0,0),  $$v_2$$ = a(0,1,0),  $$v_3$$ = a(0,0,c/a)
    * **7** = Tetragonal de corpo centrado I (bct): celldm(3)=c/a, $$v_1$$ = (a/2)(1,-1,c/a),  $$v_2$$ = (a/2)(1,1,c/a),  $$v_3$$ = (a/2)(-1,-1,c/a)
    * **8** = Ortorrômbico P: celldm(2)=b/a, celldm(3)=c/a, $$v_1$$ = (a,0,0),  $$v_2$$ = (0,b,0), $$v_3$$ = (0,0,c)
    * **9** = Ortorrômbico de base centrada (bco): celldm(2)=b/a, celldm(3)=c/a, $$v_1$$ = (a/2, b/2,0),  $$v_2$$ = (-a/2,b/2,0), $$v_3$$ = (0,0,c)
    * **10** = Ortorrômbico de face centrada: celldm(2)=b/a, celldm(3)=c/a, $$v_1$$ = (a/2,0,c/2), $$v_2$$ = (a/2,b/2,0), $$v_3$$ = (0,b/2,c/2)
    * **11** = Ortorrômbico de corpo centrado: celldm(2)=b/a, celldm(3)=c/a, $$v_1$$ = (a/2,b/2,c/2), $$v_2$$ = (-a/2,b/2,c/2), $$v_3$$ = (-a/2,-b/2,c/2)
    * **12** = Monoclínico P, eixo único c: celldm(2)=b/a, celldm(3)=c/a, celldm(4)=cos(ab), $$v_1$$ = (a,0,0), $$v_2$$ = (b*cos(gamma),b*sin(gamma),0), $$v_3$$ = (0,0,c)      
    * **13** = Monoclínico de base centrada: celldm(2)=b/a, celldm(3)=c/a, celldm(4)=cos(gamma), $$v_1$$ = (a/2,0,-c/2),
        $$v_2$$ = (b*cos(gamma), b*sin(gamma), 0), $$v_3$$ = (a/2, 0, c/2)
    * **14** = Triclínico: celldm(2)= b/a, celldm(3)= c/a, celldm(4)= cos(bc), celldm(5)= cos(ac), celldm(6)= cos(ab)
<img src="{{ site.url }}{{ site.baseurl }}/images/posts/tutorial_qe/bravais.jpg" alt="Redes de Bravais">
  * **nat**: Número total de átomos na célula unitária;
  * **ntyp**: Número de tipos de átomos diferentes;
  * **ecutwfc**: Energia de corte das funções de onda em Ry;
  * **ecutrho**: Energia de corte da densidade de carga.
